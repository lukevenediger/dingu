(function(){var e=this,n={},i={},t;n.types={};n.lookups={};e.dingu=n;var o=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,s=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,h=function(n,t){var i=[],r=[];return i=t||n.toString().match(o)[1].split(","),i.forEach(function(n){var i=n.match(s),t;if(i!==null)for(t=0;t<i.length;t++)n=n.replace(i[t],"");n=n.trim();n!==""&&r.push(n)}),r},r=function(i,r){r.forEach(function(t){if(t===i.name)throw new n.types.CircularDependencyError(i,r);});var f;switch(i.type){case t.SINGLETON:i.value||(f=u(i.dependencyNames,r.concat(i.name)),i.value=i.target.apply(i.target,f));break;case t.INSTANCE:f=u(i.dependencyNames,r.concat(i.name));i.value=i.target.apply(i.target,f)}return i.value},u=function(n,t){return n.map(function(n){if(!i.hasOwnProperty(n))throw new Error("Failed to resolve dependency. Could not find a module called "+n);return r(i[n],t)})},f=function(n){var t,i=n;return n instanceof Array&&(i=n.pop(),t=n),{fn:i,args:t}};n.module=function(r,u){var e=f(u);i[r]=new n.types.RegistryItem(r,e.fn,t.INSTANCE,e.args)};n.singleton=function(r,u){var e=f(u);i[r]=new n.types.RegistryItem(r,e.fn,t.SINGLETON,e.args)};n.value=function(r,u){i[r]=new n.types.RegistryItem(r,u,t.VALUE)};n.get=function(n){if(!i.hasOwnProperty(n))throw new Error("Item not found: "+n+" - was it registered?");return r(i[n],[])};n.reset=function(){i={}};n.types.RegistryItem=function(n,i,r,u){this.name=n;this.target=i;this.type=r;this.value=r===t.VALUE?i:null;this.dependencyNames=r!==t.VALUE?h(i,u):null};n.types.CircularDependencyError=function(n,t){this.rootItem=n;this.dependencyChain=t;this.name="CircularDependencyError";this.message="Calling "+n.name+" resolved a dependency that depends on this item. Chain: "+t.join("->")+"->"+n.name};n.types.CircularDependencyError.prototype.toString=function(){return this.message};n.types.ItemNotFoundError=function(n){this.item=n;this.message="Could not find an item called "+n+" in the registry."};n.types.ItemNotFoundError.prototype.toString=function(){return this.message};n.lookups.RegistryItemType={VALUE:"value",SINGLETON:"singleton",INSTANCE:"instance"};t=n.lookups.RegistryItemType}).call(this);
//# sourceMappingURL=dingu.min.js.map