(function(){var o=this,r=!1,n={},i={},t;n.types={};n.lookups={};o.dingu=n;var s=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,h=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,c=function(n,t){var i=[],r=[];return i=t||n.toString().match(s)[1].split(","),i.forEach(function(n){var i=n.match(h),t;if(i!==null)for(t=0;t<i.length;t++)n=n.replace(i[t],"");n=n.trim();n!==""&&r.push(n)}),r},u=function(i,r){r.forEach(function(t){if(t===i.name)throw new n.types.CircularDependencyError(i,r);});var u;switch(i.type){case t.SINGLETON:i.value||(u=f(i.dependencyNames,r.concat(i.name)),i.value=i.target.apply(i.target,u));break;case t.INSTANCE:u=f(i.dependencyNames,r.concat(i.name));i.value=i.target.apply(i.target,u)}return i.value},f=function(n,t){return n.map(function(n){if(!i.hasOwnProperty(n))throw new Error("Failed to resolve dependency. Could not find a module called "+n);return u(i[n],t)})},e=function(n){var t,i=n;return n instanceof Array&&(i=n.pop(),t=n),{fn:i,args:t}};n.module=function(u,f){if(!r){var o=e(f);i[u]=new n.types.RegistryItem(u,o.fn,t.INSTANCE,o.args)}};n.singleton=function(u,f){if(!r){var o=e(f);i[u]=new n.types.RegistryItem(u,o.fn,t.SINGLETON,o.args)}};n.value=function(u,f){r||(i[u]=new n.types.RegistryItem(u,f,t.VALUE))};n.get=function(t,r){if(!i.hasOwnProperty(t)){if(r)return undefined;throw new n.types.ItemNotFoundError(t);}return u(i[t],[])};n.reset=function(){r||(i={})};n.lock=function(){r=!0};n.types.RegistryItem=function(n,i,r,u){this.name=n;this.target=i;this.type=r;this.value=r===t.VALUE?i:null;this.dependencyNames=r!==t.VALUE?c(i,u):null};n.types.CircularDependencyError=function(n,t){this.rootItem=n;this.dependencyChain=t;this.name="CircularDependencyError";this.message="Calling "+n.name+" resolved a dependency that depends on this item. Chain: "+t.join("->")+"->"+n.name};n.types.CircularDependencyError.prototype.toString=function(){return this.message};n.types.ItemNotFoundError=function(n){this.item=n;this.message="Item not found: "+n+" - was it registered?"};n.types.ItemNotFoundError.prototype.toString=function(){return this.message};n.lookups.RegistryItemType={VALUE:"value",SINGLETON:"singleton",INSTANCE:"instance"};t=n.lookups.RegistryItemType;window.testHarness&&(testHarness.resetLockStatus=function(){r=!1})}).call(this);
//# sourceMappingURL=dingu.min.js.map